{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/communication.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","value","filter","onChange","handleFilter","PersonForm","onSubmit","handleAdd","newName","changeName","newNumber","changeNumber","type","Persons","persons","map","person","name","number","onClick","handleDelete","id","url","axios","get","newPerson","post","put","delete","Notification","success","message","className","App","useState","setPersons","setNewName","setNewNumber","setFilter","showAll","setShowAll","errorMessage","setErrorMessage","setSuccess","personsToShow","toLowerCase","startsWith","useEffect","PersonService","then","resp","data","e","target","preventDefault","a","found","find","elem","window","confirm","setTimeout","response","concat","catch","error","per","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.52d0a927.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter=(props)=>{\r\n    return(\r\n        <div>\r\n            filter shown with <input value={props.filter} onChange={props.handleFilter} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst PersonForm=(props)=>{\r\n    return (\r\n        <form onSubmit={props.handleAdd}>\r\n        <div>\r\n          name: <input value={props.newName} onChange={props.changeName} />\r\n          <div>number: <input value={props.newNumber} onChange={props.changeNumber}/></div>\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    );\r\n}\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Persons=(props)=>{\r\n    return(\r\n        <div>\r\n            {props.persons.map(person=><p key={person.id}>{person.name} {person.number}<button onClick={()=>props.handleDelete(person.name,person.id)}>delete</button></p>)}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Persons;","import axios from \"axios\";\r\n\r\nconst url ='/api/persons';\r\n\r\nconst getAll = () => {\r\n    return axios.get(url);\r\n}\r\n  \r\nconst create = newPerson => {\r\n    return axios.post(url, newPerson);\r\n}\r\n  \r\nconst update = (id, newPerson) => {\r\n    return axios.put(`${url}/${id}`, newPerson);\r\n}\r\n\r\nconst deletePerson=(id)=>{\r\n    return axios.delete(`${url}/${id}`);\r\n}\r\n  \r\nexport default {getAll,create,update,deletePerson}","const Notification = ({ success,message }) => {\r\n    if (message === null) {\r\n      return null;\r\n    }\r\n    if(success){\r\n        return (\r\n            <div className=\"success\">\r\n                {message}\r\n            </div>\r\n        );\r\n    }else{\r\n        return(\r\n            <div className=\"error\">\r\n                {message}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Notification;","import React, { useState ,useEffect} from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport PersonService from './services/communication';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [newNumber, setNewNumber]=useState('');\n  const [filter, setFilter]=useState('');\n  const [showAll,setShowAll]=useState(true);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [success,setSuccess]=useState(true);\n  const personsToShow = showAll?persons:persons.filter(person=>person.name.toLowerCase().startsWith(filter));\n\n  useEffect(()=>{\n    PersonService.getAll().then(resp=>{\n      setPersons(resp.data);\n    })\n  },[]);\n\n  const handleAdd=(e)=>{\n    e.preventDefault();\n    let a={name:newName,number:newNumber};\n    let found=persons.find(elem=>elem.name===newName);\n    if(found){\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n        PersonService.update(found.id,a)\n        .then(resp=>setPersons(persons.map(person => person.id !== found.id ? person : resp.data)));\n        setSuccess(true);\n        setErrorMessage(`updated ${newName}`);\n        setTimeout(() => {          \n          setErrorMessage(null)        \n        }, 5000)\n        setNewName('');\n        setNewNumber('');\n      }\n    }else{\n      PersonService.create(a)    \n      .then(response => {\n        setPersons(persons.concat(response.data));\n        setSuccess(true);\n        setErrorMessage(`Added ${newName}`);        \n        setTimeout(() => {          \n          setErrorMessage(null)        \n        }, 5000)\n        setNewName('');\n        setNewNumber('');   \n      })\n      .catch(error=>{\n        setSuccess(false);\n        setErrorMessage(error.response.data.error);        \n        setTimeout(() => {          \n          setErrorMessage(null)        \n        }, 5000)\n        setNewName('');\n        setNewNumber('');\n      });\n      \n    }\n  };\n  const handleFilter=(e)=>{\n    setFilter(e.target.value);\n    setShowAll(false);\n  };\n  const changeName=(e)=>{\n    setNewName(e.target.value);\n  };\n  const changeNumber=(e)=>{\n    setNewNumber(e.target.value);\n  }\n  const handleDelete=(name,id)=>{\n    if(window.confirm(`delete ${name}?`)){\n      PersonService.deletePerson(id)\n      .then(resp=>{\n        setSuccess(true);\n        setErrorMessage(`deleted ${name}`);\n        setTimeout(() => {          \n          setErrorMessage(null);\n        }, 5000);\n        setPersons(persons.filter(per=>per.id!==id));\n      })\n      .catch(error => {\n          setSuccess(false);\n          setErrorMessage(`Information of '${name}' has already been removed from server`);\n          setPersons(persons.filter(per=>per.id!==id));     \n          setTimeout(() => {          \n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n  }\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification success={success} message={errorMessage}/>\n      <Filter filter={filter} handleFilter={handleFilter}/>\n      <h3>Add a new</h3>\n      <PersonForm handleAdd={handleAdd} newName={newName} newNumber={newNumber} changeName={changeName} changeNumber={changeNumber}/>\n      <h3>Numbers</h3>\n      <Persons persons={personsToShow} handleDelete={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\n\nReactDOM.render(<App />,document.getElementById('root'));\n\n\n"],"sourceRoot":""}