(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),u=t(3),a=t(1),i=t(0),o=function(e){return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:e.filter,onChange:e.handleFilter})]})},s=function(e){return Object(i.jsxs)("form",{onSubmit:e.handleAdd,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:e.newName,onChange:e.changeName}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:e.newNumber,onChange:e.changeNumber})]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){return Object(i.jsx)("div",{children:e.persons.map((function(n){return Object(i.jsxs)("p",{children:[n.name," ",n.number,Object(i.jsx)("button",{onClick:function(){return e.handleDelete(n.name,n.id)},children:"delete"})]},n.id)}))})},l=t(4),j=t.n(l),b="/api/persons",f=function(){return j.a.get(b)},h=function(e){return j.a.post(b,e)},m=function(e,n){return j.a.put("".concat(b,"/").concat(e),n)},O=function(e){return j.a.delete("".concat(b,"/").concat(e))},p=function(e){var n=e.success,t=e.message;return null===t?null:n?Object(i.jsx)("div",{className:"success",children:t}):Object(i.jsx)("div",{className:"error",children:t})},x=function(){var e,n=Object(a.useState)([]),t=Object(u.a)(n,2),c=t[0],r=t[1],l=Object(a.useState)(""),j=Object(u.a)(l,2),b=j[0],x=j[1],v=Object(a.useState)(""),w=Object(u.a)(v,2),g=w[0],N=w[1],S=Object(a.useState)(""),k=Object(u.a)(S,2),C=k[0],y=k[1],A=Object(a.useState)(!0),T=Object(u.a)(A,2),D=T[0],E=T[1],F=Object(a.useState)(null),I=Object(u.a)(F,2),J=I[0],B=I[1],L=Object(a.useState)(!0),P=Object(u.a)(L,2),W=P[0],q=P[1],z=D?c:c.filter((function(e){return e.name.toLowerCase().startsWith(C)}));Object(a.useEffect)((function(){f().then((function(n){r(n.data),e=c.length}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(p,{success:W,message:J}),Object(i.jsx)(o,{filter:C,handleFilter:function(e){y(e.target.value),E(!1)}}),Object(i.jsx)("h3",{children:"Add a new"}),Object(i.jsx)(s,{handleAdd:function(n){n.preventDefault();var t={name:b,number:g,id:e};if(c.find((function(e){return e.name===b}))){var u=c.filter((function(e){return e.name===b}));window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))&&(m(u[0].id,t).then((function(e){return r(c.map((function(n){return n.id!==u[0].id?n:e.data})))})),q(!0),B("updated ".concat(b)),setTimeout((function(){B(null)}),5e3),x(""),N(""))}else h(t).then((function(n){r(c.concat(n.data)),e++})),q(!0),B("Added ".concat(b)),setTimeout((function(){B(null)}),5e3),x(""),N("")},newName:b,newNumber:g,changeName:function(e){x(e.target.value)},changeNumber:function(e){N(e.target.value)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(d,{persons:z,handleDelete:function(n,t){window.confirm("delete ".concat(n,"?"))&&O(t).then((function(u){q(!0),B("deleted ".concat(n)),setTimeout((function(){B(null)}),5e3),r(c.filter((function(e){return e.id!==t}))),e--})).catch((function(e){q(!1),B("Information of '".concat(n,"' has already been removed from server")),r(c.filter((function(e){return e.id!==t}))),setTimeout((function(){B(null)}),5e3)}))}})]})};t(38);r.a.render(Object(i.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b71615ac.chunk.js.map